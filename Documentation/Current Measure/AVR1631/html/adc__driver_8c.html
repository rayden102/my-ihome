<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>AVR1631 - Energy Meter Reference Design with ATxmega32A4: adc_driver.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="atmel.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">AVR1631 - Energy Meter Reference Design with ATxmega32A4
   &#160;<span id="projectnumber">Rev 1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('adc__driver_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">adc_driver.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>XMEGA ADC driver source file.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="adc__driver_8h_source.html">adc_driver.h</a>&quot;</code><br/>
</div>
<p><a href="adc__driver_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad134845335cf8c298859372e2c75f03c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="adc__driver_8c.html#ad134845335cf8c298859372e2c75f03c">ADC_CalibrationValues_Load</a> (ADC_t *adc)</td></tr>
<tr class="memdesc:ad134845335cf8c298859372e2c75f03c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function get the calibration data from the production calibration.  <a href="#ad134845335cf8c298859372e2c75f03c"></a><br/></td></tr>
<tr class="memitem:ab06443677d69d9b8aec1627e2ded342b"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="adc__driver_8c.html#ab06443677d69d9b8aec1627e2ded342b">ADC_ResultCh_GetWord_Unsigned</a> (ADC_CH_t *adc_ch, uint16_t offset)</td></tr>
<tr class="memdesc:ab06443677d69d9b8aec1627e2ded342b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function clears the interrupt flag and returns the unsigned coversion result.  <a href="#ab06443677d69d9b8aec1627e2ded342b"></a><br/></td></tr>
<tr class="memitem:ae085742daee16c4fc739165ee4173ccf"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="adc__driver_8c.html#ae085742daee16c4fc739165ee4173ccf">ADC_ResultCh_GetWord_Signed</a> (ADC_CH_t *adc_ch, int16_t signedOffset)</td></tr>
<tr class="memdesc:ae085742daee16c4fc739165ee4173ccf"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function clears the interrupt flag and returns the signed coversion result.  <a href="#ae085742daee16c4fc739165ee4173ccf"></a><br/></td></tr>
<tr class="memitem:a197015dac5cb134b45b80f8f64a8f918"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="adc__driver_8c.html#a197015dac5cb134b45b80f8f64a8f918">ADC_ResultCh_GetWord</a> (ADC_CH_t *adc_ch)</td></tr>
<tr class="memdesc:a197015dac5cb134b45b80f8f64a8f918"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function clears the interrupt flag and returns the coversion result without compensating for offset.  <a href="#a197015dac5cb134b45b80f8f64a8f918"></a><br/></td></tr>
<tr class="memitem:a8eaa6001575c54c32584064745065b0b"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="adc__driver_8c.html#a8eaa6001575c54c32584064745065b0b">ADC_ResultCh_GetLowByte</a> (ADC_CH_t *adc_ch)</td></tr>
<tr class="memdesc:a8eaa6001575c54c32584064745065b0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function clears the interrupt flag and returns the low byte of the coversion result.  <a href="#a8eaa6001575c54c32584064745065b0b"></a><br/></td></tr>
<tr class="memitem:a0554ced5fc0eae2df26746dcba581fa4"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="adc__driver_8c.html#a0554ced5fc0eae2df26746dcba581fa4">ADC_ResultCh_GetHighByte</a> (ADC_CH_t *adc_ch)</td></tr>
<tr class="memdesc:a0554ced5fc0eae2df26746dcba581fa4"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function clears the interrupt flag and returns the high byte of the coversion result.  <a href="#a0554ced5fc0eae2df26746dcba581fa4"></a><br/></td></tr>
<tr class="memitem:a98a478448d5c15720de6d517589e974e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="adc__driver_8c.html#a98a478448d5c15720de6d517589e974e">ADC_Wait_8MHz</a> (ADC_t *adc)</td></tr>
<tr class="memdesc:a98a478448d5c15720de6d517589e974e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function waits until the adc common mode is settled.  <a href="#a98a478448d5c15720de6d517589e974e"></a><br/></td></tr>
<tr class="memitem:a0e13135d7b45df0c9c615ed40765c786"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="adc__driver_8c.html#a0e13135d7b45df0c9c615ed40765c786">ADC_Wait_32MHz</a> (ADC_t *adc)</td></tr>
<tr class="memdesc:a0e13135d7b45df0c9c615ed40765c786"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function waits until the adc common mode is settled.  <a href="#a0e13135d7b45df0c9c615ed40765c786"></a><br/></td></tr>
<tr class="memitem:a19fa19c87f634a69d0739525f30558bb"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="adc__driver_8c.html#a19fa19c87f634a69d0739525f30558bb">ADC_Offset_Get_Unsigned</a> (ADC_t *adc, ADC_CH_t *ch, bool oversampling)</td></tr>
<tr class="memdesc:a19fa19c87f634a69d0739525f30558bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function gets the offset of the ADC when it is configured in unsigned mode.  <a href="#a19fa19c87f634a69d0739525f30558bb"></a><br/></td></tr>
<tr class="memitem:a1142ee4ac991fe4e4a4f2270d8bb5acb"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="adc__driver_8c.html#a1142ee4ac991fe4e4a4f2270d8bb5acb">ADC_Offset_Get_Signed</a> (ADC_t *adc, ADC_CH_t *ch, bool oversampling)</td></tr>
<tr class="memdesc:a1142ee4ac991fe4e4a4f2270d8bb5acb"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function gets the offset of the ADC when it is configured in signed mode.  <a href="#a1142ee4ac991fe4e4a4f2270d8bb5acb"></a><br/></td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>XMEGA ADC driver source file. </p>
<pre class="fragment"> This file contains the function implementations the XMEGA ADC driver.

 The driver is not intended for size and/or speed critical code, since
 most functions are just a few lines of code, and the function call
 overhead would decrease code performance. The driver is intended for
 rapid prototyping and documentation purposes for getting started with
 the XMEGA ADC module.

 For size and/or speed critical code, it is recommended to copy the
 function contents directly into your application instead of making
 a function call.

 Several functions use the following construct:
     "some_register = ... | (some_parameter ? SOME_BIT_bm : 0) | ..."
 Although the use of the ternary operator ( if ? then : else ) is discouraged,
 in some occasions the operator makes it possible to write pretty clean and
 neat code. In this driver, the construct is used to set or not set a
 configuration bit based on a boolean input parameter, such as
 the "some_parameter" in the example above.
</pre><dl class="section user"><dt>Application note:</dt><dd>AVR1300: Using the XMEGA ADC</dd></dl>
<dl class="section user"><dt>Documentation</dt><dd>For comprehensive code documentation, supported compilers, compiler settings and supported devices see readme.html</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Atmel Corporation: <a href="http://www.atmel.com">http://www.atmel.com</a> <br/>
 Support email: <a href="#" onclick="location.href='mai'+'lto:'+'avr'+'@a'+'tme'+'l.'+'com'; return false;">avr@a<span style="display: none;">.nosp@m.</span>tmel<span style="display: none;">.nosp@m.</span>.com</a></dd></dl>
<dl class="section rcs"><dt>Revision:</dt><dd>2793 </dd></dl>
<dl class="section rcs"><dt>Date:</dt><dd>2009-09-21 11:12:00 +0200 (ma, 21 sep 2009) </dd></dl>
<p><br/>
</p>
<p>Copyright (c) 2008, Atmel Corporation All rights reserved.</p>
<p>Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</p>
<ol type="1">
<li>Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</li>
</ol>
<ol type="1">
<li>Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</li>
</ol>
<ol type="1">
<li>The name of ATMEL may not be used to endorse or promote products derived from this software without specific prior written permission.</li>
</ol>
<p>THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE EXPRESSLY AND SPECIFICALLY DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. </p>

<p>Definition in file <a class="el" href="adc__driver_8c_source.html">adc_driver.c</a>.</p>
</div><h2>Function Documentation</h2>
<a class="anchor" id="ad134845335cf8c298859372e2c75f03c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ADC_CalibrationValues_Load </td>
          <td>(</td>
          <td class="paramtype">ADC_t *&#160;</td>
          <td class="paramname"><em>adc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function get the calibration data from the production calibration. </p>
<p>The calibration data is loaded from flash and stored in the calibration register. The calibration data reduces the non-linearity error in the adc.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adc</td><td>Pointer to ADC module register section. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="adc__driver_8c_source.html#l00077">77</a> of file <a class="el" href="adc__driver_8c_source.html">adc_driver.c</a>.</p>

</div>
</div>
<a class="anchor" id="a1142ee4ac991fe4e4a4f2270d8bb5acb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t ADC_Offset_Get_Signed </td>
          <td>(</td>
          <td class="paramtype">ADC_t *&#160;</td>
          <td class="paramname"><em>adc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ADC_CH_t *&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>oversampling</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function gets the offset of the ADC when it is configured in signed mode. </p>
<p>This function does one or several measurements to determine the offset of the ADC.</p>
<dl class="section note"><dt>Note</dt><dd>The ADC must be configured and enabled before this function is run.</dd>
<dd>
This function only return the low byte of the 12-bit convertion, because the offset should never be more than +-8 LSB off.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adc</td><td>Pointer to the ADC to calculate offset from. </td></tr>
    <tr><td class="paramname">ch</td><td>Pointer to the ADC channel to measure on. </td></tr>
    <tr><td class="paramname">oversampling</td><td>false for one measurement. true for averaging several measurements.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Offset on the selected ADC </dd></dl>

<p>Definition at line <a class="el" href="adc__driver_8c_source.html#l00320">320</a> of file <a class="el" href="adc__driver_8c_source.html">adc_driver.c</a>.</p>

</div>
</div>
<a class="anchor" id="a19fa19c87f634a69d0739525f30558bb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t ADC_Offset_Get_Unsigned </td>
          <td>(</td>
          <td class="paramtype">ADC_t *&#160;</td>
          <td class="paramname"><em>adc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ADC_CH_t *&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>oversampling</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function gets the offset of the ADC when it is configured in unsigned mode. </p>
<p>This function does one or several measurements to determine the offset of the ADC.</p>
<dl class="section note"><dt>Note</dt><dd>The ADC must be configured and enabled before this function is run.</dd>
<dd>
This function only return the low byte of the 12-bit convertion, because the offset should never be more than +-8 LSB off.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adc</td><td>Pointer to the ADC to calculate offset from. </td></tr>
    <tr><td class="paramname">ch</td><td>Pointer to the ADC channel to measure on. </td></tr>
    <tr><td class="paramname">oversampling</td><td>false for one measurement. true for averaging several measurements.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Offset on the selected ADC </dd></dl>

<p>Definition at line <a class="el" href="adc__driver_8c_source.html#l00273">273</a> of file <a class="el" href="adc__driver_8c_source.html">adc_driver.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0554ced5fc0eae2df26746dcba581fa4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ADC_ResultCh_GetHighByte </td>
          <td>(</td>
          <td class="paramtype">ADC_CH_t *&#160;</td>
          <td class="paramname"><em>adc_ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function clears the interrupt flag and returns the high byte of the coversion result. </p>
<pre class="fragment"> This funtion should be used together with the ADC_ResultCh_ConversionComplete.
When the conversion result is ready this function reads out the result.
</pre><dl class="section note"><dt>Note</dt><dd>If this function is used with 12-bit right adjusted results, it returns the 8 LSB only. Offset is not compensated.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adc_ch</td><td>Pointer to ADC channel register section.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>High byte of conversion result. </dd></dl>

<p>Definition at line <a class="el" href="adc__driver_8c_source.html#l00188">188</a> of file <a class="el" href="adc__driver_8c_source.html">adc_driver.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8eaa6001575c54c32584064745065b0b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ADC_ResultCh_GetLowByte </td>
          <td>(</td>
          <td class="paramtype">ADC_CH_t *&#160;</td>
          <td class="paramname"><em>adc_ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function clears the interrupt flag and returns the low byte of the coversion result. </p>
<pre class="fragment"> This funtion should be used together with the ADC_Ch_Conversion_Complete.
When the conversion result is ready this funciton reads out the result.
</pre><dl class="section note"><dt>Note</dt><dd>If this function is used with 12-bit right adjusted results, it returns the 8 LSB only. Offset is not compensated.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adc_ch</td><td>Pointer to ADC channel register section.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Low byte of conversion result. </dd></dl>

<p>Definition at line <a class="el" href="adc__driver_8c_source.html#l00168">168</a> of file <a class="el" href="adc__driver_8c_source.html">adc_driver.c</a>.</p>

</div>
</div>
<a class="anchor" id="a197015dac5cb134b45b80f8f64a8f918"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t ADC_ResultCh_GetWord </td>
          <td>(</td>
          <td class="paramtype">ADC_CH_t *&#160;</td>
          <td class="paramname"><em>adc_ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function clears the interrupt flag and returns the coversion result without compensating for offset. </p>
<pre class="fragment"> This function should be used together with the ADC_Ch_Conversion_Complete.
When the conversion result is ready this funciton reads out the result.
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adc_ch</td><td>Pointer to ADC channel register section. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Signed conversion result. </dd></dl>

<p>Definition at line <a class="el" href="adc__driver_8c_source.html#l00146">146</a> of file <a class="el" href="adc__driver_8c_source.html">adc_driver.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae085742daee16c4fc739165ee4173ccf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t ADC_ResultCh_GetWord_Signed </td>
          <td>(</td>
          <td class="paramtype">ADC_CH_t *&#160;</td>
          <td class="paramname"><em>adc_ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>signedOffset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function clears the interrupt flag and returns the signed coversion result. </p>
<pre class="fragment"> This function should be used together with the ADC_Ch_Conversion_Complete.
When the conversion result is ready this funciton reads out the result.
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adc_ch</td><td>Pointer to ADC channel register section. </td></tr>
    <tr><td class="paramname">signedOffset</td><td>Offset value to subtract. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The signed Conversion result with the offset substracted. </dd></dl>

<p>Definition at line <a class="el" href="adc__driver_8c_source.html#l00125">125</a> of file <a class="el" href="adc__driver_8c_source.html">adc_driver.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab06443677d69d9b8aec1627e2ded342b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t ADC_ResultCh_GetWord_Unsigned </td>
          <td>(</td>
          <td class="paramtype">ADC_CH_t *&#160;</td>
          <td class="paramname"><em>adc_ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function clears the interrupt flag and returns the unsigned coversion result. </p>
<pre class="fragment"> This function should be used together with the ADC_Ch_Conversion_Complete.
When the conversion result is ready this funciton reads out the result.
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adc_ch</td><td>Pointer to ADC channel register section. </td></tr>
    <tr><td class="paramname">offset</td><td>Unsigned offset value to subtract. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The unsigned Conversion result with the offset substracted. </dd></dl>

<p>Definition at line <a class="el" href="adc__driver_8c_source.html#l00102">102</a> of file <a class="el" href="adc__driver_8c_source.html">adc_driver.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0e13135d7b45df0c9c615ed40765c786"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ADC_Wait_32MHz </td>
          <td>(</td>
          <td class="paramtype">ADC_t *&#160;</td>
          <td class="paramname"><em>adc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function waits until the adc common mode is settled. </p>
<p>After the ADC clock has been turned on, the common mode voltage in the ADC need some time to settle. The time it takes equals one dummy conversion. Instead of doing a dummy conversion this function waits until the common mode is settled.</p>
<dl class="section note"><dt>Note</dt><dd>The function sets the prescaler to the minimum value possible when the clock speed is larger than 8 MHz to minimize the time it takes the common mode to settle.</dd>
<dd>
The ADC clock is turned off every time the ADC i disabled or the device goes into sleep (not Idle sleep mode).</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adc</td><td>Pointer to ADC module register section. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="adc__driver_8c_source.html#l00242">242</a> of file <a class="el" href="adc__driver_8c_source.html">adc_driver.c</a>.</p>

</div>
</div>
<a class="anchor" id="a98a478448d5c15720de6d517589e974e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ADC_Wait_8MHz </td>
          <td>(</td>
          <td class="paramtype">ADC_t *&#160;</td>
          <td class="paramname"><em>adc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function waits until the adc common mode is settled. </p>
<p>After the ADC clock has been turned on, the common mode voltage in the ADC need some time to settle. The time it takes equals one dummy conversion. Instead of doing a dummy conversion this function waits until the common mode is settled.</p>
<dl class="section note"><dt>Note</dt><dd>The function sets the prescaler to the minimum value to minimize the time it takes the common mode to settle. If the clock speed is higher than 8 MHz use the ADC_wait_32MHz function.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adc</td><td>Pointer to ADC module register section. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="adc__driver_8c_source.html#l00210">210</a> of file <a class="el" href="adc__driver_8c_source.html">adc_driver.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="adc__driver_8c.html">adc_driver.c</a></li>
    <li class="footer">Generated on Fri Sep 14 2012 16:28:35 for AVR1631 - Energy Meter Reference Design with ATxmega32A4 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1.2 </li>
  </ul>
</div>
</body>
</html>
